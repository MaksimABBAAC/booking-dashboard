{% extends 'main/base.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/client_profile.css' %}">
{% endblock style %}

{% block content %}
<div class="client-profile">
    <div class="client-header">
        <h1 class="client-name">–ö–ª–∏–µ–Ω—Ç {{ client.number }}</h1>
        <div class="client-details">
            <p><strong>Telegram ID:</strong> {{ client.tg_id|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>
        </div>
    </div>
    
    <div class="client-info">
        <h3>–ó–∞–ø–∏—Å–∏</h3>
        
        <table class="appointments-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–ú–∞—Å—Ç–µ—Ä</th>
                    <th>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                <tr>
                    <td>{{ appointment.id }}</td>
                    <td>{{ appointment.date|date:"d.m.Y" }}</td>
                    <td>{{ appointment.start_time|time:"H:i" }}-{{ appointment.end_time|time:"H:i" }}</td>
                    <td>
                        {% if appointment.master %}
                        <a href="{% url 'masters:master' appointment.master.id %}">
                            {{ appointment.master.surname }} {{ appointment.master.name }}
                        </a>
                        {% else %}
                        –ú–∞—Å—Ç–µ—Ä —É–¥–∞–ª–µ–Ω
                        {% endif %}
                    </td>
                    <td>
                        {% if appointment.master and appointment.master.specialty %}
                            {{ appointment.master.specialty.name }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>
                        <span class="status-badge {% if appointment.is_available %}status-available{% else %}status-booked{% endif %}">
                            {% if appointment.is_available %}–°–≤–æ–±–æ–¥–Ω–æ{% else %}–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ{% endif %}
                        </span>
                    </td>
                    <td class="actions">
                        <a href="{% url 'appointments:appointment_edit' appointment.id %}" class="btn-action btn-edit">‚úèÔ∏è</a>
                        <form action="{% url 'appointments:appointment_delete' appointment.id %}" method="post" class="form-action">
                            {% csrf_token %}
                            <button type="submit" class="btn-action btn-delete" onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å?')">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align: center;">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="action-buttons">
        <a href="{% url 'clients:clients' %}" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤</a>
    </div>
</div>
{% endblock content %}