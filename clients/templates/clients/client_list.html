{% extends 'main/base.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
{% endblock style %}

{% block content %}
<div class="content">
    <div class="table-header">
        <div class="header-row">
            <h2>–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
            <div class="header-actions">
                <form method="get" action="{% url 'clients:clients' %}" class="search-form">
                    <input type="text" 
                           name="phone_search" 
                           placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –∏–ª–∏ Telegram" 
                           value="{{ search_query }}"
                           class="search-input">
                    <button type="submit" class="search-btn">üîç</button>
                </form>
                <a href="{% url 'clients:client_add' %}" class="btn-add">
                    + –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
                </a>
            </div>
        </div>
    </div>
    
    {% if clients %}
    <table>
        <thead>
            <tr>
                <th>–ù–æ–º–µ—Ä</th>
                <th>Telegram ID</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for client in clients %}
            <tr>
                <td><a href="{% url 'clients:client' client.pk %}">{{ client.number }}</a></td>
                <td>{{ client.tg_id|default:"-" }}</td>
                <td class="actions">
                    <a href="{% url 'clients:client_edit' client.id %}" class="btn-action btn-edit">‚úèÔ∏è</a>
                    <form action="{% url 'clients:client_delete' client.id %}" method="post" class="form-action">
                        {% csrf_token %}
                        <button type="submit" class="btn-action btn-delete" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞?')">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    
    {% else %}
    <div class="no-results">
        <p>–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã{% if search_query %} –ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ search_query }}"{% endif %}</p>
    </div>
    {% endif %}
</div>
{% endblock %}